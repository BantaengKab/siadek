<script src="<?= BASE_ASSET; ?>/js/jquery.hotkeys.js"></script>

<script type="text/javascript">
//This page is a result of an autogenerated content made by running test.html with firefox.
function domo(){
 
   // Binding keys
   $('*').bind('keydown', 'Ctrl+a', function assets() {
       window.location.href = BASE_URL + '/Tbl_perencanaan_rencana/add';
       return false;
   });

   $('*').bind('keydown', 'Ctrl+f', function assets() {
       $('#sbtn').trigger('click');
       return false;
   });

   $('*').bind('keydown', 'Ctrl+x', function assets() {
       $('#reset').trigger('click');
       return false;
   });

   $('*').bind('keydown', 'Ctrl+b', function assets() {

       $('#reset').trigger('click');
       return false;
   });
}

jQuery(document).ready(domo);
</script>

<!-- Main content -->
<section class="content">
    <form class="form-horizontal">
   <div class="row" >

      <div class="col-md-12">
         
         <div class="callout callout-info">
        <h4>Inport APBDes!</h4>
        Silahkan Import Data APBDes !
        <a href="<?php echo base_url()?>Tbl_perencanaan_rencana/form">Import </a>
      </div>

          <div class="box box-info">
            <div class="box-header">
              <h3 class="box-title">Anggaran Desa (APBDes)
                <small>Data Anggaran Desa (APBDes)</small>
              </h3>
              <!-- tools box -->
              <div class="pull-right box-tools">
                <button type="button" class="btn btn-info btn-sm" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse">
                  <i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-info btn-sm" data-widget="remove" data-toggle="tooltip" title="" data-original-title="Remove">
                  <i class="fa fa-times"></i></button>
              </div>
              <!-- /. tools -->
            </div>
            <!-- /.box-header -->
            <div class="box-body pad" style="display: block;">




<div class="box-header with-border">
            <form class="form-horizontal">

               
                  
                    <div class="row">
                    <div class="form-group ">
                      <br>
                            
                        </div>
                  </div>
                  
                   <div class="row">
                    <div class="form-group ">
                          
                            <div class="col-sm-3">
                              <?php 
                                  $username = get_user_data('id'); 
                                    $user_gr = get_user_group($username);
                                    $kdwilayah = get_user_data('kd_wilayah');
                                    if($user_gr == '1' || $user_gr == '9'){
                                  $a = db_get_all_data('wilayah');
                                }else{
                                 $a = db_get_all_data('wilayah',"kd_wilayah LIKE '$kdwilayah%'");
                                }
                                
                              ?>
                                <select  class="form-control chosen chosen-select-deselect" name="kd_wilayah" id="kd_wilayah" data-placeholder="PILIH wilayah" onchange="submit()">
                                 
                                  <?php  $username = get_user_data('id'); 
                                    $user_gr = get_user_group($username);
                                    if($user_gr == '1' || $user_gr == '9' || $user_gr == '7'){ ?>
                                    <option value="0"></option>
                                  <?php } ?>

                                  <?php foreach ($a as $row): ?>
                                    
                                    <option 
                                    <?php if ($row->kd_wilayah == $this->input->get('kd_wilayah')) { ?>selected="selected"<?php } ?>
                                    value="<?= $row->kd_wilayah ?>"><?= '[ '.$row->kd_wilayah.' ] '. $row->nama ?></option>
                                    <?php endforeach; ?>  
                                </select>
                                <small class="info help-block">
                                </small>
                            </div>
                            
                           <div class="col-sm-3">
                                <select  class="form-control chosen chosen-select-deselect" name="tahun" id="tahun" data-placeholder="PILIH TAHUN" onchange="submit()">
                                 <option value="0"></option>
                                 <option <?php if ('2020' == $this->input->get('tahun')) { ?>selected="selected"<?php } ?>value="2020">2020</option>
                                 <option <?php if ('2019' == $this->input->get('tahun')) { ?>selected="selected"<?php } ?>value="2019">2019</option>
                                 <option <?php if ('2018' == $this->input->get('tahun')) { ?>selected="selected"<?php } ?>value="2018">2018</option>
                                 <option <?php if ('2017' == $this->input->get('tahun')) { ?>selected="selected"<?php } ?>value="2017">2017</option>
                                </select>
                                <small class="info help-block">
                                </small>
                            </div>
                        </div>
                  </div>
                 
                </div>
              </div>
            </div>
        <div id="detail_anggaran"><div class="box box-primary">
    <div class="box-header with-border">
        <h3 class="box-title">Detail Anggaran Desa (APBDes)</h3>
    </div>
    <!-- /.box-header -->
    <div class="box-body">
        <div class="box-group" id="accordion">
            <div class="panel box box-primary">
                <div class="box-header with-border">
                    <h4 class="box-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            1 - PENDAPATAN
                        </a>
                    </h4>
                    <div class="box-tools pull-right">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            <h4>0.00</h4>
                        </a>
                    </div>
                </div>
                <div id="collapseOne" class="panel-collapse collapse">
                    <div class="box-body">
                        <table class="table table-striped table-bordered" id="data-coa">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th style=" text-align: center">Kode Rekening</th>
                                <th style=" text-align: center">URAIAN</th>
                                <th style=" text-align: center">SUMBER DANA</th>
                                <th style=" text-align: center">Jumlah</th>
                            </tr>
                            </thead>
                            <tbody>
                                <?php foreach($tbl_perencanaan_rencana_pendapatans as $tbl_perencanaan_rencana_pendapatan): ?>
                                                            <tr>
                                    <td class="icon-class"></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pendapatan->kd_rekening; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pendapatan->urai_pekerjaan; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pendapatan->sumber_dana; ?>
                                    </strong></td>
                                    <td align="right">
                                        <strong><?php echo number_format($tbl_perencanaan_rencana_pendapatan->anggaran,0,"","."); ?>                                        
                                        </strong>
                                    </td>
                                </tr>   
                                
                      <?php endforeach; ?>
                      <?php if ($tbl_perencanaan_rencana_count_pendapatans == 0) :?>
                         <tr>
                           <td colspan="100">
                           APBDes data is not available
                           </td>
                         </tr>
                      <?php endif; ?>
                                    </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel box box-primary">
                <div class="box-header with-border">
                    <h4 class="box-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            2 - BELANJA
                        </a>
                    </h4>
                    <div class="box-tools pull-right">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            <h4>0.00                            </h4>
                        </a>
                    </div>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse">
                   <div class="box-body">
                        <table class="table table-striped table-bordered" id="data-coa">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th style=" text-align: center">Kode Rekening</th>
                                <th style=" text-align: center">URAIAN</th>
                                <th style=" text-align: center">SUMBER DANA</th>
                                <th style=" text-align: center">Jumlah</th>
                            </tr>
                            </thead>
                            <tbody>
                                <?php foreach($tbl_perencanaan_rencana_belanjas as $tbl_perencanaan_rencana_belanja): ?>
                                                            <tr>
                                    <td class="icon-class"></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_belanja->kd_rekening; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_belanja->urai_pekerjaan; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_belanja->sumber_dana; ?>
                                    </strong></td>
                                    <td align="right">
                                        <strong><?php echo number_format($tbl_perencanaan_rencana_belanja->anggaran,0,"","."); ?>                                        
                                        </strong>
                                    </td>
                                </tr>   
                                
                      <?php endforeach; ?>
                      <?php if ($tbl_perencanaan_rencana_count_belanjas == 0) :?>
                         <tr>
                           <td colspan="100">
                           APBDes data is not available
                           </td>
                         </tr>
                      <?php endif; ?>
                                    </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel box box-primary">
                <div class="box-header with-border">
                    <h4 class="box-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            3- PEMBIAYAAN
                        </a>
                    </h4>
                    <div class="box-tools pull-right">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            <h4>0.00                            </h4>
                        </a>
                    </div>
                </div>
                <div id="collapseThree" class="panel-collapse collapse">
                    <div class="box-body">
                        <table class="table table-striped table-bordered" id="data-coa">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th style=" text-align: center">Kode Rekening</th>
                                <th style=" text-align: center">URAIAN</th>
                                <th style=" text-align: center">SUMBER DANA</th>
                                <th style=" text-align: center">Jumlah</th>
                            </tr>
                            </thead>
                            <tbody>
                                <?php foreach($tbl_perencanaan_rencana_pembiayaans as $tbl_perencanaan_rencana_pembiayaan): ?>
                                                            <tr>
                                    <td class="icon-class"></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pembiayaan->kd_rekening; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pembiayaan->urai_pekerjaan; ?></strong></td>
                                    <td><strong><?php echo $tbl_perencanaan_rencana_pembiayaan->sumber_dana; ?>
                                    </strong></td>
                                    <td align="right">
                                        <strong><?php echo number_format($tbl_perencanaan_rencana_pembiayaan->anggaran,0,"","."); ?>                                        
                                        </strong>
                                    </td>
                                </tr>   
                                
                      <?php endforeach; ?>
                      <?php if ($tbl_perencanaan_rencana_count_pembiayaans == 0) :?>
                         <tr>
                           <td colspan="100">
                           APBDes data is not available
                           </td>
                         </tr>
                      <?php endif; ?>
                                    </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div></div>
      </div>
   </div>
   </form>
</section>
<!-- /.content -->

<!-- Page script -->
<script>
  $(document).ready(function(){
   
    $('.remove-data').click(function(){

      var url = $(this).attr('data-href');

      swal({
          title: "<?= cclang('are_you_sure'); ?>",
          text: "<?= cclang('data_to_be_deleted_can_not_be_restored'); ?>",
          type: "warning",
          showCancelButton: true,
          confirmButtonColor: "#DD6B55",
          confirmButtonText: "<?= cclang('yes_delete_it'); ?>",
          cancelButtonText: "<?= cclang('no_cancel_plx'); ?>",
          closeOnConfirm: true,
          closeOnCancel: true
        },
        function(isConfirm){
          if (isConfirm) {
            document.location.href = url;            
          }
        });

      return false;
    });


    $('#apply').click(function(){

      var bulk = $('#bulk');
      var serialize_bulk = $('#form_tbl_perencanaan_rencana').serialize();

      if (bulk.val() == 'delete') {
         swal({
            title: "<?= cclang('are_you_sure'); ?>",
            text: "<?= cclang('data_to_be_deleted_can_not_be_restored'); ?>",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "<?= cclang('yes_delete_it'); ?>",
            cancelButtonText: "<?= cclang('no_cancel_plx'); ?>",
            closeOnConfirm: true,
            closeOnCancel: true
          },
          function(isConfirm){
            if (isConfirm) {
               document.location.href = BASE_URL + '/tbl_perencanaan_rencana/delete?' + serialize_bulk;      
            }
          });

        return false;

      } else if(bulk.val() == '')  {
          swal({
            title: "Upss",
            text: "<?= cclang('please_choose_bulk_action_first'); ?>",
            type: "warning",
            showCancelButton: false,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Okay!",
            closeOnConfirm: true,
            closeOnCancel: true
          });

        return false;
      }

      return false;

    });/end appliy click/


    //check all
    var checkAll = $('#check_all');
    var checkboxes = $('input.check');

    checkAll.on('ifChecked ifUnchecked', function(event) {   
        if (event.type == 'ifChecked') {
            checkboxes.iCheck('check');
        } else {
            checkboxes.iCheck('uncheck');
        }
    });

    checkboxes.on('ifChanged', function(event){
        if(checkboxes.filter(':checked').length == checkboxes.length) {
            checkAll.prop('checked', 'checked');
        } else {
            checkAll.removeProp('checked');
        }
        checkAll.iCheck('update');
    });

  }); /end doc ready/
</script>